const FEATURED_IDS=[4,11,18,26];let currentSlide=0,slideInterval=null;const CATEGORY_INFO={sustainability:{icon:"üåø",name:"Sustainability",description:"Comprehensive projects focused on ecological balance, sustainable mining practices, and environmental preservation. These initiatives demonstrate commitment to reducing environmental impact while maintaining economic viability."},food:{icon:"üç¥",name:"Food Security",description:"Strategic initiatives addressing food security challenges across Africa and developing regions. Projects include agricultural development, capacity building, and innovative solutions for sustainable food production systems."},realestate:{icon:"üè®",name:"Real Estate",description:"Diverse portfolio of real estate development and investment projects. From commercial properties to hospitality ventures, these projects combine strategic location analysis with sustainable development principles."},investment:{icon:"üí∞",name:"Investment",description:"Strategic investment opportunities and financial analyses across multiple sectors. Comprehensive feasibility studies and investment guides for informed decision-making in emerging markets."},technology:{icon:"‚ö°",name:"Technology",description:"Innovative technology solutions including renewable energy systems, smart infrastructure, and cutting-edge developments. Projects that leverage technology for sustainable development and improved quality of life."},research:{icon:"üìö",name:"Research",description:"In-depth research and academic publications covering sustainable development, economic analysis, and social impact studies. Evidence-based insights for policy and decision-making."}};document.addEventListener("DOMContentLoaded",function(){initSlideshow(),initProjectsDashboard(),initModal(),initNavbar(),initMobileScrollLock()});let savedScrollY=0;function initMobileScrollLock(){const e=document.getElementById("mobile-modal-overlay"),t=document.getElementById("mobile-modal-close-btn"),n=document.getElementById("mobile-modal-view-btn");t&&t.addEventListener("click",closeMobileModal),e&&e.addEventListener("click",function(t){t.target===e&&closeMobileModal()}),n&&n.addEventListener("click",function(){const e=document.getElementById("mobile-modal-download-btn").href;window.open(e,"_blank")}),document.addEventListener("keydown",function(e){"Escape"===e.key&&closeMobileModal()})}function openMobileModal(e,t,n){const o=document.getElementById("mobile-modal-overlay");if(!o)return;const i=DOCUMENTS_BASE_PATH+t;document.getElementById("mobile-modal-name").textContent=e,document.getElementById("mobile-modal-desc").textContent=n||"",document.getElementById("mobile-modal-download-btn").href=i;if("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname)document.getElementById("mobile-modal-preview").src=i;else{const e=new URL(i,window.location.href).href;document.getElementById("mobile-modal-preview").src=`https://docs.google.com/viewer?url=${encodeURIComponent(e)}&embedded=true`}window.scrollTo({top:0,behavior:"smooth"}),o.classList.add("active")}function closeMobileModal(){const e=document.getElementById("mobile-modal-overlay");e&&(e.classList.remove("active"),document.getElementById("mobile-modal-preview").src="")}function initSlideshow(){if("undefined"==typeof DOCUMENTS_DATA)return;const e=document.getElementById("slideshow");if(!e)return;const t=FEATURED_IDS.map(e=>DOCUMENTS_DATA.find(t=>t.id===e)).filter(Boolean),n=t.map((e,t)=>`\n        <div class="slide ${0===t?"active":""}" data-index="${t}" style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.5)), url('${e.thumbnail||"assets/placeholder.jpg"}'); background-size: cover; background-position: center;">\n            <div class="slide-featured-header">\n               <span>‚≠ê FEATURED INSIGHTS</span>\n            </div>\n            <div class="slide-content">\n                <div class="slide-category">\n                   <span class="category-icon">${"investment"===e.category?"üí∞":"‚ö°"}</span>\n                   ${e.categoryLabel.replace("üåø ","").replace("üí∞ ","").replace("‚ö° ","")}\n                </div>\n                <h2 class="slide-title">${e.title}</h2>\n                <p class="slide-description">${e.description}</p>\n                <div class="slide-actions">\n                    <button class="slide-btn slide-btn-primary" onclick="openModal('${escapeQuotes(e.title)}', '${escapeQuotes(e.filename)}')">\n                        üëÅÔ∏è View Document\n                    </button>\n                    <a href="${DOCUMENTS_BASE_PATH}${e.filename}" class="slide-btn slide-btn-secondary" download>\n                        ‚¨áÔ∏è Download\n                    </a>\n                </div>\n            </div>\n        </div>\n    `).join(""),o=`\n        <div class="slideshow-controls">\n            <button class="slide-arrow" onclick="changeSlide(-1)">‚óÄ</button>\n            <div class="slide-dots">\n                ${t.map((e,t)=>`\n                    <span class="slide-dot ${0===t?"active":""}" data-index="${t}" onclick="goToSlide(${t})"></span>\n                `).join("")}\n            </div>\n            <button class="slide-arrow" onclick="changeSlide(1)">‚ñ∂</button>\n        </div>\n    `;e.innerHTML=n+o,startSlideshow(),initTouchSwipe(e)}function initTouchSwipe(e){let t=0,n=0;e.addEventListener("touchstart",e=>{t=e.changedTouches[0].screenX},{passive:!0}),e.addEventListener("touchend",e=>{n=e.changedTouches[0].screenX,function(){const e=n-t;if(Math.abs(e)<50)return;changeSlide(e>0?-1:1)}()},{passive:!0})}function startSlideshow(){stopSlideshow(),document.hidden||(slideInterval=setInterval(()=>changeSlide(1),5e3))}function stopSlideshow(){slideInterval&&clearInterval(slideInterval)}function changeSlide(e){const t=document.querySelectorAll(".slide"),n=document.querySelectorAll(".slide-dot");t.length&&(t[currentSlide].classList.remove("active"),n[currentSlide].classList.remove("active"),currentSlide=(currentSlide+e+t.length)%t.length,t[currentSlide].classList.add("active"),n[currentSlide].classList.add("active"),startSlideshow())}function goToSlide(e){const t=document.querySelectorAll(".slide"),n=document.querySelectorAll(".slide-dot");t.length&&(t[currentSlide].classList.remove("active"),n[currentSlide].classList.remove("active"),currentSlide=e,t[currentSlide].classList.add("active"),n[currentSlide].classList.add("active"),startSlideshow())}function initNavbar(){console.log("Projects navigation initialized")}window.onpopstate=null,window.history.state&&window.history.state.isModalOpen&&window.history.replaceState(null,""),document.addEventListener("visibilitychange",()=>{document.hidden?stopSlideshow():startSlideshow()});let currentFilter="all",currentView="grid";function initProjectsDashboard(){if("undefined"==typeof DOCUMENTS_DATA)return;const e=document.getElementById("filterTabs"),t=document.getElementById("projectsGallery");if(!e||!t)return;const n={};DOCUMENTS_DATA.forEach(e=>{n[e.category]||(n[e.category]=[]),n[e.category].push(e)});const o=["sustainability","food","realestate","investment","technology","research"],i=o[0];e.innerHTML=o.map(e=>{const t=CATEGORY_INFO[e],o=n[e]?.length||0;return 0===o?"":`\n            <button class="filter-tab ${e===i?"active":""}"\n                    data-filter="${e}"\n                    onclick="filterProjects('${e}')">\n                <span class="filter-tab-icon">${t.icon}</span>\n                <span>${t.name}</span>\n                <span class="filter-tab-count">${o}</span>\n            </button>\n        `}).join(""),currentFilter=i,renderProjects(n[i]||[]),document.querySelectorAll(".view-btn").forEach(e=>{e.addEventListener("click",()=>{document.querySelectorAll(".view-btn").forEach(e=>e.classList.remove("active")),e.classList.add("active"),currentView=e.dataset.view,t.classList.toggle("list-view","list"===currentView)})})}function filterProjects(e){currentFilter=e,document.querySelectorAll(".filter-tab").forEach(t=>{t.classList.toggle("active",t.dataset.filter===e)});renderProjects(DOCUMENTS_DATA.filter(t=>t.category===e))}function renderProjects(e){const t=document.getElementById("projectsGallery"),n=document.getElementById("emptyState");if(t){if(0===e.length)return t.innerHTML="",void(n&&(n.style.display="block"));n&&(n.style.display="none"),t.innerHTML=e.map(e=>`\n        <div class="project-card" data-title="${escapeQuotes(e.title)}" onclick="openProjectModal('${escapeQuotes(e.title)}', '${escapeQuotes(e.filename)}')">\n            <div class="project-thumbnail">\n                ${e.thumbnail?`<img src="${e.thumbnail}" alt="${escapeQuotes(e.title)}" loading="lazy">`:`<span class="project-thumbnail-icon">${getDocIcon(e.type)}</span>`}\n                <div class="project-badge">\n                    <span class="badge-dot"></span>\n                    ${e.type}\n                </div>\n                <div class="project-thumbnail-overlay">\n                    <div class="thumbnail-actions">\n                        <button class="thumb-btn thumb-btn-primary" onclick="event.stopPropagation(); openModal('${escapeQuotes(e.title)}', '${escapeQuotes(e.filename)}')">\n                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>\n                                <circle cx="12" cy="12" r="3"/>\n                            </svg>\n                            View\n                        </button>\n                        <a href="${DOCUMENTS_BASE_PATH}${e.filename}" class="thumb-btn thumb-btn-secondary" download onclick="event.stopPropagation()">\n                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>\n                                <polyline points="7 10 12 15 17 10"/>\n                                <line x1="12" y1="15" x2="12" y2="3"/>\n                            </svg>\n                        </a>\n                    </div>\n                </div>\n            </div>\n            <div class="project-body">\n                <div class="project-category">${CATEGORY_INFO[e.category]?.name||e.category}</div>\n                <h3 class="project-title">${e.title}</h3>\n                <p class="project-description">${e.description||""}</p>\n            </div>\n            <div class="project-footer">\n                <div class="project-meta">\n                    <div class="meta-item">\n                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>\n                            <polyline points="14 2 14 8 20 8"/>\n                        </svg>\n                        ${e.type}\n                    </div>\n                </div>\n                <div class="project-actions">\n                    <button class="action-btn" onclick="event.stopPropagation(); openModal('${escapeQuotes(e.title)}', '${escapeQuotes(e.filename)}')" title="View">\n                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>\n                            <circle cx="12" cy="12" r="3"/>\n                        </svg>\n                    </button>\n                    <a href="${DOCUMENTS_BASE_PATH}${e.filename}" class="action-btn" download onclick="event.stopPropagation()" title="Download">\n                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>\n                            <polyline points="7 10 12 15 17 10"/>\n                            <line x1="12" y1="15" x2="12" y2="3"/>\n                        </svg>\n                    </a>\n                </div>\n            </div>\n        </div>\n    `).join(""),t.classList.toggle("list-view","list"===currentView)}}function openProjectModal(e,t){openModal(e,t)}function getDocIcon(e){return{PDF:"üìÑ",PPTX:"üìä",DOCX:"üìù"}[e]||"üìÑ"}function escapeQuotes(e){return e?e.toString().replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):""}function initModal(){const e=document.getElementById("pdfModal"),t=document.getElementById("modalClose");e&&t&&(t.addEventListener("click",closeModal),e.addEventListener("click",t=>{t.target===e&&closeModal()}),document.addEventListener("keydown",e=>{"Escape"===e.key&&closeModal()}))}function openModal(e,t){if(window.innerWidth<768){let n="";if("undefined"!=typeof DOCUMENTS_DATA){const e=DOCUMENTS_DATA.find(e=>e.filename===t);e&&(n=e.description)}return void openMobileModal(e,t,n)}const n=document.getElementById("pdfModal"),o=DOCUMENTS_BASE_PATH+t;document.getElementById("modalTitle").textContent=e;if("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname)document.getElementById("pdfViewer").src=o;else{const e=new URL(o,window.location.href).href,t=`https://docs.google.com/viewer?url=${encodeURIComponent(e)}&embedded=true`;document.getElementById("pdfViewer").src=t}document.getElementById("modalDownloadBtn").href=o,n.classList.add("active"),document.body.style.overflow="hidden",clearInterval(slideInterval)}function closeModal(){const e=document.getElementById("pdfModal");e&&e.classList.remove("active"),document.getElementById("pdfViewer").src="",document.body.style.overflow="",startSlideshow()}function handleViewPdf(e,t){const n=window.innerWidth<992,o=DOCUMENTS_BASE_PATH+e;n?window.open(o,"_blank"):openModal(t,e)}